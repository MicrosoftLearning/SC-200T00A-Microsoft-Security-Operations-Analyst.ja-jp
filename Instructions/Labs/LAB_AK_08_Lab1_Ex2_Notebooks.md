---
lab:
  title: 演習 2 - Microsoft Sentinel でのノートブックを使用した脅威ハンティング
  module: Learning Path 8 - Perform threat hunting in Microsoft Sentinel
---

# ラーニング パス 8 - ラボ 1 - 演習 2 - Microsoft Sentinel でのノートブックを使用した脅威ハンティング

## ラボのシナリオ

あなたは、Microsoft Sentinel を実装した会社で働いているセキュリティ運用アナリストです。 Microsoft Sentinel Notebooks を使った脅威ハンティングの利点を調査する必要があります。 Notebooks は次の用途に使用できます。

- 一部の Python 機械学習機能など、Microsoft Sentinel 何もしないと提供されない分析を実行します。
- カスタムのタイムラインやプロセス ツリーなど、Microsoft Sentinel で何もしないと提供されないデータ視覚化を作成します。
- オンプレミスのデータ セットなど、Microsoft Sentinel の外部にあるデータ ソースを統合する

>**メモ:** このラボをご自分のペースでクリックして進めることができる、 **[ラボの対話型シミュレーション](https://mslabs.cloudguides.com/guides/SC-200%20Lab%20Simulation%20-%20Hunt%20for%20threats%20using%20notebooks%20in%20Microsoft%20Sentinel)** が用意されています。 対話型シミュレーションとホストされたラボの間に若干の違いがある場合がありますが、示されている主要な概念とアイデアは同じです。 

### タスク 1:ノートブックの探索

このタスクでは、Microsoft Sentinel でノートブックを使用する方法について説明します。

1. 管理者として WIN1 仮想マシンにログインします。パスワードは**Pa55w.rd**。  

1. Edge ブラウザーで、Azure portal (https://portal.azure.com ) に移動します。

1. **[サインイン]** ダイアログ ボックスで、ラボ ホスティング プロバイダーから提供された**テナントの電子メール** アカウントをコピーして貼り付け、 **[次へ]** を選択します。

1. **[パスワードの入力]** ダイアログ ボックスで、ラボ ホスティング プロバイダーから提供された**テナントのパスワード**をコピーして貼り付け、 **[サインイン]** を選択します。

1. Azure portal の検索バーに「*Sentinel*」と入力してから、**[Microsoft Sentinel]** を選択します。

1. Microsoft Sentinel ワークスペースを選択します。

1. Microsoft Sentinel ワークスペースで、 *[脅威の管理]* 領域の下にある **[ノートブック]** を選択します。

1. 次に、AzureML ワークスペースを作成する必要があります。 **[Azure Machine Learning の構成]** を選択し、コマンド バーの **[新しい Azure ML ワークスペースの作成]** ボタンを選択します。

1. [サブスクリプション] ボックスでお使いのサブスクリプションを選択します。

1. リソース グループの **[新規作成]** を選択し、名前として「*RG-MachineLearning*」と入力して、**[OK]** を選択します。 

1. ワークスペースの詳細 セクションで次の作業を行います。

     - お使いのワークスペースに一意の名前を付けます。
     - *[リージョン]* の既定値は **[米国東部]** のままにします。
     - 既定のストレージ アカウント、キーボールト、およびアプリケーション インサイト情報を保持します。
     - [コンテナー レジストリ] オプションは、**[なし]** のままにできます。

1. ページの下部で **[確認および作成]** を選択します。 *検証に成功しました* というメッセージが表示されたら、 **[作成]** を選択します。 

     >**注:**  Machine Learning ワークスペースのデプロイには数分かかる場合があります。

1. *デプロイが完了しました* というメッセージが表示されたら、Microsoft Sentinel ポータルに戻ります。

1. **[ノートブック]** をもう一度選択し、中央のコマンド バーから **[テンプレート]** タブを選択します。 

1. **[Microsoft Sentinel ML ノートブックのファースト ステップ ガイド]** を選択します。 

1. 右側のペインで下にスクロールし、**[テンプレートから作成]** ボタンを選択します。 既定のオプションを確認してから、 **[保存]** を選択します。

1. 保存が完了したら、**[ノートブックの起動]** ボタンを選択します。 これにより Microsoft Azure Machine Learning スタジオに移動します。

1. Microsoft Azure Machine Learning スタジオで情報ウィンドウが表示されたら、**[閉じる]** を選択します。

1. コマンド バーの **[コンピューティング]** インスタンス セレクターの右側にある **[+]** 記号を選択して、新しいコンピューティング インスタンスを作成します。 **ヒント:** 省略記号アイコン **[...]** 内にあり表示されていない場合があります。

     >**注:** 左上にある 3 本線を選んで Azure ML スタジオの左側のブレードを非表示にし、 **[<<]** アイコンを選んでノートブック ファイルを非表示にすることで、画面領域を増やすことができます。

1. *[コンピューティング名]* フィールドに一意の名前を入力します。 これにより、コンピューティング インスタンスが識別されます。

1. 下にスクロールし、使用可能な最初のオプションを選択します。 **ヒント:** ワークロードの種類:Notebooks での開発と軽量テスト。

1. 画面の下部にある **[作成]** ボタンを選択します。 表示される可能性のあるフィードバック ウィンドウをすべて閉じます。 これには数分かかります。完了すると通知 (ベル アイコン) が表示され、"コンピューティング インスタンス" の左側のアイコンが青から緑に変わります。**

1. コンピューティングが作成されて実行されたら、使用するカーネルが *Python 3.8 - AzureML* であることを確認します。 **ヒント:** これは、コマンド バーの右側に表示されます。

1. **[認証]** ボタンを選択し、認証が完了するまで待ちます。

1. コマンド バーの **[すべての出力のクリア]** を選んで、ノートブックのすべての結果をクリアし、"*作業の開始*" のチュートリアルに従います。 **ヒント:** これは、コマンド バーから省略記号 (...) を選択することで確認できます。

>**注:** 上の手順のようにしてもノートブックにアクセスできない場合は、代わりにその GitHub ビューアー ページで手順のようにしてもかまいません。 [Azure ML ノートブックと Microsoft Sentinel の概要](https://nbviewer.org/github/Azure/Azure-Sentinel-Notebooks/blob/master/A%20Getting%20Started%20Guide%20For%20Azure%20Sentinel%20ML%20Notebooks.ipynb) 

## これでラボは完了です。
